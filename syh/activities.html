<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="utf-8" />
  <title>活動資訊｜新義和歌劇團</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="description" content="最新活動、活動紀錄與作品集，一頁掌握演出資訊、報名連結與精彩回顧。" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="activities.css">
  <link rel="icon" href="favicon.ico">
</head>
<body>
  <!-- 頁首 / 次級導覽 -->
  <header class="site-header">
    <div class="container head-wrap">
      <a class="brand" href="home.html" aria-label="回到首頁">
      <!-- 若目前只有「白底黑字」logo.png，先用 .invert 反轉成黑底白字 -->
      <img class="brand-logo invert" src="img/logo.png" alt="新義和歌劇團">
    </a>

      <nav class="subnav" aria-label="活動頁導覽">
        <a class="subnav-link" href="home.html">首頁</a>
        <a class="subnav-link" href="#latest" data-tab="latest" aria-current="page">最新活動</a>
        <a class="subnav-link" href="#history" data-tab="history">活動紀錄</a>
        <a class="subnav-link" href="#portfolio" data-tab="portfolio">作品集</a>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero">
    <div class="container">
      <h1>活動資訊</h1>
      <p class="hero-sub">📣 追蹤即將上演的節目、回顧歷來演出與精選作品。</p>
      <div class="filters">
        <label class="sr-only" for="search">搜尋活動</label>
        <input id="search" class="search" type="search" placeholder="搜尋關鍵字（標題、地點、標籤）…" />
        <select id="tagFilter" class="tag-filter" aria-label="依標籤篩選">
          <option value="">全部標籤</option>
        </select>
      </div>
    </div>
  </section>

  <!-- 分頁內容 -->
  <main class="container">
    <section id="panel-latest" class="panel" role="region" aria-labelledby="tab-latest">
      <h2 id="tab-latest" class="panel-title">最新活動</h2>
      <div id="latestList" class="card-grid" aria-live="polite"></div>
      <div class="empty" id="latestEmpty" hidden>目前沒有即將舉辦的活動，敬請期待！</div>
    </section>

    <section id="panel-history" class="panel" role="region" aria-labelledby="tab-history" hidden>
      <h2 id="tab-history" class="panel-title">活動紀錄</h2>
      <div id="historyList" class="timeline" aria-live="polite"></div>
      <div class="empty" id="historyEmpty" hidden>尚無活動紀錄。</div>
    </section>

    <section id="panel-portfolio" class="panel" role="region" aria-labelledby="tab-portfolio" hidden>
      <h2 id="tab-portfolio" class="panel-title">作品集</h2>
      <div id="portfolioList" class="masonry" aria-live="polite"></div>
      <div class="empty" id="portfolioEmpty" hidden>尚未建立作品集項目。</div>
    </section>
  </main>

  <!-- 活動詳情 Modal（不顯示圖片） -->
  <dialog id="eventDialog" class="event-dialog" aria-label="活動詳情">
    <form method="dialog">
      <button class="close" aria-label="關閉">✕</button>
    </form>
    <div class="dialog-body" id="dialogBody"></div>
  </dialog>

  <footer class="site-footer">
    <div class="container">
      <small>© <span id="year"></span> 新義和歌劇團｜All Rights Reserved.</small>
    </div>
  </footer>

  <!-- ======== JS（合併在 HTML）======== -->
  <script>
    /* ============== 0) 範例資料（先這樣放，之後換成你的真實資料） ============== */
    const events = [
      /* ---------- 七月（對應國曆 8–9 月） ---------- */
      {
        id: "u-20250827-fuxing-zhentiangong",
        title: "台北復興北路",
        dateStart: "2025-08-27",
        location: "台北復興北路",
        tags: ["宮廟","活動","台北"],
        summary: "農曆 7/5。",
        type: "upcoming"
      },
      {
        id: "u-20250904-0925-baishatun",
        title: "苗栗白沙屯",
        dateStart: "2025-09-04",
        dateEnd:   "2025-09-12",
        location: "苗栗白沙屯",
        tags: ["宮廟","連續多日","苗栗"],
        summary: "農曆 7/13–7/16，連續多日活動。",
        type: "upcoming"
      },
      {
        id: "u-20250905-gongliao-hemei",
        title: "新北貢寮和美",
        dateStart: "2025-09-05",
        location: "新北貢寮和美",
        tags: ["宮廟","新北"],
        summary: "農曆 7/14。",
        type: "upcoming"
      },
      {
        id: "u-7m-16-30-malinggong",
        title: "苗栗後龍",
        dateStart: "2025-09-07",
        dateEnd:   "2025-09-25",
        location: "苗栗後龍",
        tags: ["宮廟","苗栗","連續多日"],
        summary: "農曆 7/16–7/30，連續多日活動。",
        type: "upcoming"
      },

      /* ---------- 八月（對應國曆 9–10 月） ---------- */
      {
        id: "u-20250922-houlong-baixing",
        title: "苗栗後龍",
        dateStart: "2025-09-22",
        location: "後龍百姓公",
        tags: ["宮廟","苗栗"],
        summary: "農曆 8/1。",
        type: "upcoming"
      },
      {
        id: "u-20250926-27-jingmei-xizhou-fude",
        title: "台北景美溪州",
        dateStart: "2025-09-26",
        dateEnd:   "2025-09-27",
        location: "台北景美溪州",
        tags: ["宮廟","台北"],
        summary: "農曆 8/5–8/6。",
        type: "upcoming"
      },
      {
        id: "u-20250929-shimen-fude",
        title: "支援金龍 新北石門",
        dateStart: "2025-09-29",
        location: "石門",
        tags: ["宮廟","支援","新北"],
        summary: "農曆 8/8。",
        type: "upcoming"
      },
      {
        id: "u-20250930-sanchong-jiexing",
        title: "支援民權 新北三重",
        dateStart: "2025-09-30",
        location: "三重",
        tags: ["宮廟","支援","新北"],
        summary: "農曆 8/9。",
        type: "upcoming"
      },
      {
        id: "u-20251001-hsinchu-wenhua-fude",
        title: "新竹文華",
        dateStart: "2025-10-01",
        location: "新竹文華",
        tags: ["宮廟","新竹"],
        summary: "農曆 8/10。",
        type: "upcoming"
      },
      {
        id: "u-20251004-xinfeng-senmei",
        title: "支援森美 新竹新豐",
        dateStart: "2025-10-04",
        location: "新竹新豐",
        tags: ["活動","支援","新竹"],
        summary: "農曆 8/13。",
        type: "upcoming"
      },
      {
        id: "u-20251010-11-zhudong-ronghua-fude",
        title: "支援王世金 新竹竹東榮華",
        dateStart: "2025-10-10",
        dateEnd:   "2025-10-11",
        location: "新竹竹東榮華",
        tags: ["宮廟","支援","新竹"],
        summary: "農曆 8/19–8/20。",
        type: "upcoming"
      },
      {
        id: "u-20251013-taichung-fengyuan",
        title: "台中豐原",
        dateStart: "2025-10-13",
        location: "台中豐原",
        tags: ["活動","台中"],
        summary: "農曆 8/22。",
        type: "upcoming"
      },
      {
        id: "u-20251014-15-longdong-longxing",
        title: "新北龍洞",
        dateStart: "2025-10-14",
        dateEnd:   "2025-10-15",
        location: "新北龍洞",
        tags: ["宮廟","新北"],
        summary: "農曆 8/23–8/24。",
        type: "upcoming"
      },
      {
        id: "u-20251017-19-sanxia-xibeili",
        title: "新北三峽溪北里",
        dateStart: "2025-10-17",
        dateEnd:   "2025-10-19",
        location: "新北三峽橫溪路17號",
        tags: ["活動","新北"],
        summary: "農曆 8/26–8/28。",
        type: "upcoming"
      },
    
      /* ---------- 九月（對應國曆 10–11 月） ---------- */
      {
        id: "u-20251021-22-qingshui",
        title: "台中清水",
        dateStart: "2025-10-21",
        dateEnd:   "2025-10-22",
        location: "台中清水",
        tags: ["活動","台中"],
        summary: "農曆 9/1–9/2。",
        type: "upcoming"
      },
      {
        id: "u-20251024-hsinchu-wangxiansheng",
        title: "新竹",
        dateStart: "2025-10-24",
        location: "新竹",
        tags: ["宮廟","新竹"],
        summary: "農曆 9/4。",
        type: "upcoming"
      },
      {
        id: "u-20251029-banqiao-shenqiu-fude",
        title: "新北板橋深秋",
        dateStart: "2025-10-29",
        location: "新北板橋深秋",
        tags: ["宮廟","新北"],
        summary: "農曆 9/9。",
        type: "upcoming"
      },
      {
        id: "u-20251031-taoyuan-yushan-street",
        title: "支援王世金 桃園玉山街",
        dateStart: "2025-10-31",
        location: "支援世金 桃園市玉山街",
        tags: ["活動","支援","桃園"],
        summary: "農曆 9/11。",
        type: "upcoming"
      },
      {
        id: "u-20251103-wugu-shanan",
        title: "新北五股",
        dateStart: "2025-11-03",
        location: "新北五股",
        tags: ["宮廟","新北"],
        summary: "農曆 9/14。",
        type: "upcoming"
      },
      {
        id: "u-20251104-05-hemei-baoan",
        title: "新北和美",
        dateStart: "2025-11-04",
        dateEnd:   "2025-11-05",
        location: "新北和美",
        tags: ["宮廟","新北"],
        summary: "農曆 9/15–9/16。",
        type: "upcoming"
      },
      {
        id: "u-20251107-yilan-zhuangwei",
        title: "宜蘭壯圍",
        dateStart: "2025-11-07",
        location: "宜蘭壯圍",
        tags: ["活動","宜蘭"],
        summary: "農曆 9/18。",
        type: "upcoming"
      },
    
      /* ---------- 十月（對應國曆 11–12 月） ---------- */
      {
        id: "u-20251122-huitian",
        title: "苗栗後龍",
        dateStart: "2025-11-22",
        location: "苗栗後龍",
        tags: ["宮廟","苗栗"],
        summary: "農曆 10/3。",
        type: "upcoming"
      },
      {
        id: "u-20251130-tanwen-senmei",
        title: "支援森美 苗栗造橋",
        dateStart: "2025-11-30",
        location: "苗栗造橋",
        tags: ["活動","苗栗"],
        summary: "農曆 10/11。",
        type: "upcoming"
      },
      {
        id: "u-20251203-nanqing",
        title: "台中清水",
        dateStart: "2025-12-03",
        location: "台中清水",
        tags: ["宮廟","台中"],
        summary: "農曆 10/14。",
        type: "upcoming"
      },
      {
        id: "u-20251206-zaoqiao-shijjn",
        title: "支援王世金 苗栗造橋",
        dateStart: "2025-12-06",
        location: "苗栗造橋",
        tags: ["活動","苗栗"],
        summary: "農曆 10/17。",
        type: "upcoming"
      },
      {
        id: "u-20251211-12-xingan-senmei",
        title: "支援森美 苗栗白沙屯",
        dateStart: "2025-12-11",
        dateEnd:   "2025-12-12",
        location: "苗栗白沙屯",
        tags: ["宮廟","苗栗"],
        summary: "農曆 10/22–10/23。",
        type: "upcoming"
      },
      {
        id: "u-20251213-houlong-ziyun-shangdi",
        title: "苗栗後龍",
        dateStart: "2025-12-13",
        location: "苗栗後龍",
        tags: ["宮廟","苗栗"],
        summary: "農曆 10/24。",
        type: "upcoming"
      },
      {
        id: "u-20251219-21-hsinchu-75",
        title: "新竹",
        dateStart: "2025-12-19",
        dateEnd:   "2025-12-21",
        location: "新竹",
        tags: ["宮廟","新竹"],
        summary: "農曆 10/30–11/2。",
        type: "upcoming"
      },
    
      /* ---------- 十一月（對應國曆 12 月與次年 1 月） ---------- */
      {
        id: "u-20251220-qingshui-senmei",
        title: "支援森美 台中清水",
        dateStart: "2025-12-20",
        location: "台中市清水區",
        tags: ["活動","台中","支援"],
        summary: "農曆 11/1。",
        type: "upcoming"
      },
      {
        id: "u-20251228-sanmin",
        title: "桃園三民",
        dateStart: "2025-12-28",
        location: "桃園三民",
        tags: ["活動","桃園"],
        summary: "農曆 11/9。",
        type: "upcoming"
      },
      {
        id: "u-20260102-houlong-baixing-senmei",
        title: "支援森美 苗栗後龍",
        dateStart: "2026-01-02",
        location: "後龍百姓宮",
        tags: ["宮廟","苗栗","支援"],
        summary: "農曆 11/14。",
        type: "upcoming"
      },
      {
        id: "h-2024-12-25",
        title: "《龍城爭霸》— 雲林場",
        dateStart: "2024-12-25T19:30:00+08:00",
        location: "雲林表演藝術中心",
        city: "雲林縣",
        cover: "https://picsum.photos/seed/longcheng/800/500",
        tags: ["歌仔戲","巡演"],
        summary: "融合傳統與現代舞台技術的全新演繹。",
        gallery: ["https://picsum.photos/seed/a1/1200/800","https://picsum.photos/seed/a2/1200/800"],
        type: "past"
      },
      {
        id: "h-2024-04-28",
        title: "《八仙傳奇》— 高雄場",
        dateStart: "2024-04-28T19:00:00+08:00",
        location: "衛武營表演廳",
        city: "高雄市",
        cover: "https://picsum.photos/seed/baxian/800/500",
        tags: ["歌仔戲","經典"],
        summary: "經典八仙故事，融合現代燈光與多媒體舞台。",
        type: "past"
      },
      {
        id: "p-ig-luwenlong",
        title: "經典電視歌仔戲《陸文龍》戲中曲調",
        dateStart: "2025-08-18",           // 想排序靠前就填今天或最近日期；不填也可
        location: "Instagram Reels",
        city: "線上",
        cover: "https://picsum.photos/seed/luwenlong/800/500", // 建議換成你自己的封面圖網址
        tags: ["作品集", "花絮", "歌仔戲"],
        summary: "片段花絮：經典電視歌仔戲《陸文龍》中的曲調節選。",
        videoUrl: "https://www.instagram.com/reel/DNahemuyJDC/?igsh=ODhwNGhtZms0dHQ4",
        type: "portfolio"
      }
    ];

    /* ============== 1) 小工具 ============== */
    const $ = (sel, root = document) => root.querySelector(sel);
    const $$ = (sel, root = document) => Array.from(root.querySelectorAll(sel));

    // 只顯示「日期」YYYY-MM-DD（不管原始字串是否含時間）
    const formatDate = (iso) => {
      if (!iso) return "日期未定";
      const t = Date.parse(iso);
      if (!Number.isFinite(t)) {
        // 若完全無法解析，就嘗試切出前 10 碼 YYYY-MM-DD；再不行就原樣回傳
        return /^\d{4}-\d{2}-\d{2}/.test(iso) ? iso.slice(0,10) : iso;
      }
      const d = new Date(t);
      const Y = d.getFullYear();
      const M = String(d.getMonth()+1).padStart(2,'0');
      const D = String(d.getDate()).padStart(2,'0');
      return `${Y}-${M}-${D}`;
    };

    function createTagChips(tags = []) {
      return tags.map(t => `<span class="chip" data-chip="${t}">${t}</span>`).join("");
    }

    function populateTagFilter() {
      const set = new Set();
      events.forEach(e => (e.tags || []).forEach(t => set.add(t)));
      const sel = $("#tagFilter");
      [...set].sort().forEach(tag => {
        const opt = document.createElement("option");
        opt.value = tag; opt.textContent = tag;
        sel.appendChild(opt);
      });
    }

    /* ============== 2) HTML 生成（不含圖片） ============== */
    function cardHTML(e){
      return `
      <article class="card" tabindex="0" aria-label="${e.title}">
        <div class="card-body">
          <h3 class="card-title">${e.title}</h3>
          <p class="card-meta">🗓 ${formatDate(e.dateStart)}${e.dateEnd ? ' - ' + formatDate(e.dateEnd) : ''}</p>
          <p class="card-meta">📍 ${e.location || ''}${e.city ? '（' + e.city + '）' : ''}</p>
          <p class="card-desc">${e.summary || ""}</p>
          <div class="card-tags">${createTagChips(e.tags || [])}</div>
          <div class="card-actions">
            ${e.ticketUrl ? `<a class="btn primary" href="${e.ticketUrl}" target="_blank" rel="noopener">立即報名</a>` : ""}
            <button class="btn ghost" data-detail="${e.id}">看詳情</button>
          </div>
        </div>
      </article>`;
    }

    function timelineHTML(e){
      return `
      <div class="time-item">
        <div class="time-dot" aria-hidden="true"></div>
        <div class="time-content">
          <time class="time-date">${formatDate(e.dateStart)}${e.dateEnd ? ' - ' + formatDate(e.dateEnd) : ''}</time>
          <h3 class="time-title">${e.title}</h3>
          <p class="time-meta">📍 ${e.location || ''}${e.city ? '（' + e.city + '）' : ''}</p>
          <div class="time-tags">${createTagChips(e.tags || [])}</div>
          <div class="time-actions">
            <button class="btn ghost" data-detail="${e.id}">看回顧</button>
          </div>
        </div>
      </div>`;
    }

    function portfolioHTML(e){
      return `
      <figure class="masonry-item" tabindex="0" aria-label="${e.title}">
        <figcaption>
          <h3>${e.title}</h3>
          <p>🗓 ${formatDate(e.dateStart)}${e.dateEnd ? ' - ' + formatDate(e.dateEnd) : ''}｜${e.location || ''}</p>
          <div class="chips">${createTagChips(e.tags || [])}</div>
          <div class="card-actions">
            ${e.videoUrl ? `<a class="btn primary" href="${e.videoUrl}" target="_blank" rel="noopener">觀看影片</a>` : ""}
            <button class="btn ghost" data-detail="${e.id}">看詳情</button>
          </div>
        </figcaption>
      </figure>`;
    }

    /* ============== 3) 渲染（依 type 分頁，日期只排序不顯示時間） ============== */
    const safeTime = iso => Number.isFinite(Date.parse(iso)) ? Date.parse(iso) : NaN;
    function matchKeyword(e, kw) {
      if (!kw) return true;
      const hay = [e.title, e.location, e.city, e.summary, ...(e.tags || [])].join(" ").toLowerCase();
      return hay.includes(kw.toLowerCase());
    }
    function matchTag(e, tag) {
      if (!tag) return true;
      return (e.tags || []).includes(tag);
    }

    function renderLatest(list, kw="", tag="") {
      const data = events
        .filter(e => (e.type || "").trim() === "upcoming")
        .filter(e => matchKeyword(e, kw) && matchTag(e, tag))
        .sort((a,b) => (Number.isFinite(safeTime(a.dateStart)) ? safeTime(a.dateStart) : Infinity) - (Number.isFinite(safeTime(b.dateStart)) ? safeTime(b.dateStart) : Infinity));
      list.innerHTML = data.map(cardHTML).join("");
      $("#latestEmpty").hidden = data.length !== 0;
    }

    function renderHistory(list, kw="", tag="") {
      const data = events
        .filter(e => (e.type || "").trim() === "past")
        .filter(e => matchKeyword(e, kw) && matchTag(e, tag))
        .sort((a,b) => (Number.isFinite(safeTime(b.dateStart)) ? safeTime(b.dateStart) : -Infinity) - (Number.isFinite(safeTime(a.dateStart)) ? safeTime(a.dateStart) : -Infinity));
      list.innerHTML = data.map(timelineHTML).join("");
      $("#historyEmpty").hidden = data.length !== 0;
    }

    function renderPortfolio(list, kw="", tag="") {
      const data = events
        .filter(e => (e.type || "").trim() === "portfolio")
        .filter(e => matchKeyword(e, kw) && matchTag(e, tag))
        .sort((a,b) => (Number.isFinite(safeTime(b.dateStart)) ? safeTime(b.dateStart) : -Infinity) - (Number.isFinite(safeTime(a.dateStart)) ? safeTime(a.dateStart) : -Infinity));
      list.innerHTML = data.map(portfolioHTML).join("");
      $("#portfolioEmpty").hidden = data.length !== 0;
    }

    /* ============== 4) 分頁切換（hash 路由） ============== */
    const panels = {
      latest: $("#panel-latest"),
      history: $("#panel-history"),
      portfolio: $("#panel-portfolio"),
    };
    function switchTab(tab) {
      Object.entries(panels).forEach(([k, el]) => el.hidden = (k !== tab));
      $$(".subnav-link").forEach(a => {
        a.classList.toggle("active", a.dataset.tab === tab);
        if (a.dataset.tab === tab) a.setAttribute("aria-current", "page");
        else a.removeAttribute("aria-current");
      });
      document.activeElement && document.activeElement.blur();
    }

    function handleHashChange() {
      const tab = (location.hash.replace("#","") || "latest");
      switchTab(tab);
      const kw = $("#search").value.trim();
      const tg = $("#tagFilter").value;
      renderLatest($("#latestList"), kw, tg);
      renderHistory($("#historyList"), kw, tg);
      renderPortfolio($("#portfolioList"), kw, tg);
    }

    /* ============== 5) 詳情 Modal（不顯示圖片） ============== */
    const dialog = $("#eventDialog");
    const dialogBody = $("#dialogBody");
    function openDetail(id) {
      const e = events.find(x => x.id === id);
      if (!e) return;
      dialogBody.innerHTML = `
        <div class="detail">
          <div class="detail-info">
            <h3>${e.title}</h3>
            <p>🗓 ${formatDate(e.dateStart)}${e.dateEnd ? ' - ' + formatDate(e.dateEnd) : ''}</p>
            <p>📍 ${e.location || ''}${e.city ? '（' + e.city + '）' : ''}</p>
            <div class="chips">${createTagChips(e.tags || [])}</div>
            <p class="detail-desc">${e.summary || ""}</p>
            <div class="detail-actions">
              ${e.ticketUrl ? `<a class="btn primary" href="${e.ticketUrl}" target="_blank" rel="noopener">前往報名</a>` : ""}
              ${e.videoUrl ? `<a class="btn" href="${e.videoUrl}" target="_blank" rel="noopener">觀看影片</a>` : ""}
            </div>
          </div>
        </div>
      `;
      dialog.showModal();
    }
    dialog.addEventListener("click", (ev) => {
      const rect = dialog.querySelector(".dialog-body").getBoundingClientRect?.() || dialog.getBoundingClientRect();
      const inDialog = ev.clientX >= rect.left && ev.clientX <= rect.right && ev.clientY >= rect.top && ev.clientY <= rect.bottom;
      if (!inDialog) dialog.close();
    });
    document.body.addEventListener("click", (ev) => {
      const btn = ev.target.closest("[data-detail]");
      if (btn) openDetail(btn.getAttribute("data-detail"));
    });

    /* ============== 6) 搜尋與標籤事件 ============== */
    $("#search").addEventListener("input", handleHashChange);
    $("#tagFilter").addEventListener("change", handleHashChange);

    /* ============== 7) 初始化 ============== */
    (function init() {
      $("#year").textContent = new Date().getFullYear();
      populateTagFilter();
      $$(".subnav a[data-tab]").forEach(a => {
        a.addEventListener("click", (e) => {
          e.preventDefault();
          history.replaceState(null, "", `#${a.dataset.tab}`);
          handleHashChange();
        });
      });
      if (!location.hash) location.hash = "#latest";
      handleHashChange();
      window.addEventListener("hashchange", handleHashChange);
      injectStructuredData(events);
    })();

    /* ============== 8) JSON-LD（SEO；不輸出 image） ============== */
    function injectStructuredData(items) {
      const upcoming = items.filter(i => (i.type || "").trim() === "upcoming");
      const ld = {
        "@context": "https://schema.org",
        "@type": "ItemList",
        "name": "新義和歌劇團 活動列表",
        "itemListElement": upcoming.map((e, idx) => ({
          "@type": "ListItem",
          "position": idx + 1,
          "item": {
            "@type": "Event",
            "name": e.title,
            "startDate": e.dateStart,
            ...(e.dateEnd ? {"endDate": e.dateEnd} : {}),
            "eventAttendanceMode": "https://schema.org/OfflineEventAttendanceMode",
            "location": {"@type": "Place","name": e.location || "","address": e.city || ""},
            "description": e.summary || "",
            ...(e.ticketUrl ? {"offers": {"@type": "Offer","url": e.ticketUrl,"availability": "https://schema.org/InStock"}} : {})
          }
        }))
      };
      const script = document.createElement("script");
      script.type = "application/ld+json";
      script.textContent = JSON.stringify(ld, null, 2);
      document.head.appendChild(script);
    }
  </script>
</body>
</html>
